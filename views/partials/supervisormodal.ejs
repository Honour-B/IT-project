<!-- Supervisor Modal -->
<div id="supervisorModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="supervisorDetails"><p>Loading...</p></div>
  </div>
</div>
   <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById('supervisorModal');
      const details = document.getElementById('supervisorDetails');
      const closeBtn = modal.querySelector('.close');

      // Open modal when clicking supervisor link
      document.getElementById('supervisorLink')?.addEventListener('click', async (e) => {
        e.preventDefault();
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; 

        try {
          const response = await fetch('/supervisor-details');
          if (!response.ok) throw new Error('Failed to fetch supervisor');
          details.innerHTML = await response.text();
        } catch (err) {
          details.innerHTML = 'Error loading supervisor details';
        }
      });

      // Close (X)
      closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = '';
      });

      // Close if clicked outside
      window.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        }
      });
    });
  </script>